function initialize(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("addressCompleter"),{types:["geocode"]}),google.maps.event.addListener(autocomplete,"place_changed",function(){findAddress()});var e={zoom:4,center:new google.maps.LatLng(38.5,-98),mapTypeId:google.maps.MapTypeId.SATELLITE,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},draggableCursor:"crosshair",mapTypeControl:!1};map=new google.maps.Map(document.getElementById("map-canvas"),e),newPoly(!0),geocoder=new google.maps.Geocoder}function findAddress(){address=null,null==address&&(address=document.getElementById("addressCompleter").value),geocoder.geocode({address:address},function(e,t){t==google.maps.GeocoderStatus.OK&&(map.setCenter(e[0].geometry.location),map.setZoom(20),map.setTilt(0),null==houseMarker?houseMarker=new google.maps.Marker({position:e[0].geometry.location,map:map,icon:grnPin,clickable:!1}):houseMarker.setPosition(e[0].geometry.location))})}function addPoint(e,t){if(t.insertAt(t.length,e.latLng),0==calculators.getAt(calculators.getLength()-1).mvcMarkers.getLength()){var a=new google.maps.Marker({position:e.latLng,map:map,icon:orgPin,draggable:!0});isFirst=!1}else{var a=new google.maps.Marker({position:e.latLng,map:map,icon:whtPin,draggable:!0});computeArea()}"Show Markers"==document.getElementById("hideBtn").innerHTML&&a.setVisible(!1),google.maps.event.addListener(a,"dragend",function(){for(var e=0,o=calculators.getAt(calculators.getLength()-1).mvcMarkers.getLength();o>e&&calculators.getAt(calculators.getLength()-1).mvcMarkers.getAt(e)!=a;++e);t.setAt(e,a.getPosition()),computeArea()}),calculators.getAt(calculators.getLength()-1).mvcMarkers.push(a)}function newPoly(e){calculators.getLength()>0&&setUneditable(),makingPoly=!0,isFirst=!0,paths.push(new google.maps.MVCArray),google.maps.event.addListener(map,"click",function(t){makingPoly&&addPoint(t,paths[paths.length-1],e)});var t=new google.maps.Polygon;if(e){var a={strokeWeight:3,strokeColor:"#00FF40",fillColor:"#00FF40"};t.setOptions(a)}else{var a={strokeWeight:3,strokeColor:"#FF0000",fillColor:"#FF0000"};t.setOptions(a)}t.setMap(map),t.setPaths(new google.maps.MVCArray([paths[paths.length-1]])),google.maps.event.addListener(t,"click",function(t){makingPoly&&addPoint(t,paths[paths.length-1],e)});var o={mvcPolygon:new google.maps.MVCArray,mvcMarkers:new google.maps.MVCArray,polygon:t,addFlag:e};calculators.push(o)}function computeArea(){var e=0;calculators.forEach(function(t){t.addFlag?e+=google.maps.geometry.spherical.computeArea(t.polygon.getPath()):e-=google.maps.geometry.spherical.computeArea(t.polygon.getPath())});var t=""+10.7639104*e,a=""+.000247105381*e;t=t.substring(0,t.indexOf(".")+3),a=a.substring(0,a.indexOf(".")+3),document.getElementById("feetRow").innerHTML=t+" Sq. ft</br>",document.getElementById("acreRow").innerHTML=a+" acres</br>"}function clearLastMarker(){if(1==calculators.getAt(calculators.getLength()-1).mvcMarkers.getLength())clearAll();else{calculators.getAt(calculators.getLength()-1).mvcMarkers.getAt(calculators.getAt(calculators.getLength()-1).mvcMarkers.getLength()-1).setMap(null),calculators.getAt(calculators.getLength()-1).mvcMarkers.pop();var e=new google.maps.MVCArray;calculators.getAt(calculators.getLength()-1).mvcMarkers.forEach(function(t){e.push(t.getPosition())}),paths[paths.length-1]=e,calculators.getAt(calculators.getLength()-1).polygon.setPaths(e),computeArea()}}function clearLastPoly(){paths[paths.length-1]=null,paths.pop();calculators.getAt(calculators.getLength()-1).mvcMarkers.getLength()-1;calculators.getAt(calculators.getLength()-1).mvcMarkers.forEach(function(e){e.setMap(null)}),calculators.getAt(calculators.getLength()-1).mvcMarkers.clear(),calculators.getAt(calculators.getLength()-1).polygon.setMap(null),calculators.getAt(calculators.getLength()-1).polygon=null,calculators.pop(),isFirst=!0,makingPoly=!1,computeArea()}function clearAll(){google.maps.event.clearInstanceListeners(calculators.getAt(calculators.getLength()-1).polygon),calculators.getAt(calculators.getLength()-1).mvcMarkers.forEach(function(e){google.maps.event.clearInstanceListeners(e),google.maps.event.clearInstanceListeners(e)}),google.maps.event.clearListeners(map,"click"),calculators.forEach(function(){clearLastPoly()}),paths=[new google.maps.MVCArray],calculators=new google.maps.MVCArray,isFirst=!0,makingPoly=!1,computeArea()}function reset(){location.reload()}function setUneditable(){google.maps.event.clearInstanceListeners(calculators.getAt(calculators.getLength()-1).polygon),calculators.getAt(calculators.getLength()-1).polygon.setEditable(!1),calculators.getAt(calculators.getLength()-1).mvcMarkers.forEach(function(e){google.maps.event.clearInstanceListeners(e),google.maps.event.clearInstanceListeners(e)}),google.maps.event.clearInstanceListeners(map),clearMarkersInLastPoly();var e={clickable:!1};calculators.getAt(calculators.getLength()-1).polygon.setOptions(e)}function clearMarkersInLastPoly(){calculators.getAt(calculators.getLength()-1).mvcMarkers.forEach(function(e){e.setMap(null)}),calculators.getAt(calculators.getLength()-1).mvcMarkers.clear(),isFirst=!0}function hideMarkers(){"Hide Markers"==document.getElementById("hideBtn").innerHTML?(calculators.forEach(function(e){e.mvcMarkers.forEach(function(e){e.setVisible(!1)})}),document.getElementById("hideBtn").innerHTML="Show Markers"):(calculators.forEach(function(e){e.mvcMarkers.forEach(function(e){e.setVisible(!0)})}),document.getElementById("hideBtn").innerHTML="Hide Markers")}var placeSearch,autocomplete,orgPin={url:"images/orgPin.png",size:new google.maps.Size(22,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12,42)},whtPin={url:"images/whtPin.png",size:new google.maps.Size(17,31),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(7,32)},grnPin={url:"images/grnPin.png",size:new google.maps.Size(22,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12,42)},map,geocoder,placeSearch,autocomplete,address,houseMarker,makingPoly,paths=[new google.maps.MVCArray],calculators=new google.maps.MVCArray,isFirst=!0,firstPoly=!0;google.maps.event.addDomListener(window,"load",initialize);